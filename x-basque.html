<!DOCTYPE html>
<html>
<head>
  <title>Basque Country</title>
  <meta charset="UTF-8">
	<meta name="andrewzc" content="exclude" />
  <meta name="viewport" content="width=800">
  <link rel="stylesheet" href="styles.css">
  <style>
    td { white-space: nowrap; }
    th { text-align: center; }
    table { border-spacing: 0px; }
    .countries tr td:not(:first-child) { width: 97px; opacity: 0.8; }
    .states tr td:not(:first-child) { width: 72px; opacity: 0.8; }
    .ratio { text-align: center; color: #444; }
  </style>
</head>
<body>
<div class="headline"><img class="state-large" src="images/flags/basque.png"> Basque Country</div>
<div class="items small">
  <table id="table" class="countries"></table>
  <div id="map" lat="43" lon="-3" zoom="6" cluster="false" style="height: 600px;"></div>
  <script src="map.js"></script>
  <div id="lists"></div>
</div>
<script src="bingo.js"></script>
<script>

const places = [
  { key: "spain", name: "Albania", icon: "ðŸ‡ªðŸ‡¸"},
  { key: "france", name: "Bosnia", icon: "ðŸ‡«ðŸ‡·"},
];
  
const pages = [
  { key: "cities", name: "Cities", icon: "ðŸ™ï¸", hide: true },
  { key: "confluence", name: "Confluence", icon: "ðŸš¸", hide: true,
    exclude: ["Saint-Laurent-de-la-PrÃ©e", "Saint-Seurin-sur-lâ€™Isle"],
    include: ["La Chapelle-Vicomtesse"] },
  { key: "unesco", name: "Heritage", icon: "ðŸ‡ºðŸ‡³", hide: true, exclude: ["San Lorenzo de El Escorial"] },
  { key: "enclaves", name: "Enclaves", icon: "ðŸ©", hide: true, exclude: ["SÃ©ron", "GardÃ¨res", "Valle de Villaverde"] },
  { key: "trams", name: "Trams", icon: "ðŸš‹", hide: true, exclude: [] },

  { key: "airports", name: "Airports", icon: "ðŸ›«", hide: true },
  { key: "beaches", name: "Beaches", icon: "ðŸ–ï¸", hide: true },
  { key: "bilingual", name: "Bilingual", icon: "âœŒï¸", hide: true },
  { key: "cathedrals", name: "Cathedrals", icon: "â›ªï¸", hide: true, exclude: ["Almudena"] },
  { key: "spain", name: "Comunidades autÃ³nomas de EspaÃ±a", icon: "ðŸ‡ªðŸ‡¸", hide: true, include: ["Castilla y LeÃ³n"], exclude: ["Cantabria"] },
  { key: "closed-trams", name: "Closed Trams", icon: "ðŸ°", hide: true, exclude: ["Pau", "Lourdes", "Arcachon", "Donostia"] },
  { key: "factories", name: "Factories", icon: "ðŸ­", hide: true },
  { key: "fare-cards", name: "Fare Cards", icon: "ðŸŽŸï¸", hide: true },
  { key: "funiculars", name: "Funiculars", icon: "ðŸš ", hide: true },
  { key: "lighthouses", name: "Lighthouses", icon: "ðŸ•¯ï¸", hide: true },
  { key: "calatrava", name: "Santiago Calatrava", icon: "ðŸ¦”", hide: true },
  { key: "stations", name: "Stations", icon: "ðŸš‰", hide: true, exclude: ["Madrid Atocha", "Madrid Nuevos Ministerios"] },
  { key: "suburban", name: "Suburban Trains", icon: "ðŸšˆ", hide: true },
  { key: "transporter", name: "Transporter Bridges", icon: "ðŸšŸ", hide: true, exclude: ["Rochefort-Martrou"] },
  
];

function inRect(place, minLat, maxLat, minLon, maxLon) {
  if (!place.coords) return false;
  let coords = place.coords.split(",").map(c => Number(c.trim()));
  if (coords.length != 2) return false;
  let lat = coords[0];
  let lon = coords[1];
  return lat >= minLat && lat <= maxLat && lon >= minLon && lon <= maxLon;
}

function bingoFilter(place) {
  if (["Madrid", "Bilbao", "Bordeaux"].includes(place.city)) return true;
  if (place.name == "Vitoria") {
    console.log(place.name, place.coords, "inRect", inRect(place, 42, 46, -4, 0));
  }
  if (inRect(place, 42, 46, -4, 0)) return true;
  return false;
}

(async function init() {
  await bingoMain("countries", bingoFilter);
  showPlaces(mapPlaces);
})();

</script>
</body>
</html>
